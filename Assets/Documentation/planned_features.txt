FEATURE ROADMAP (in about the order they should be implemented)

bug: modifier overlay is transparent on tilemap
bug: animated tile animation resets on every drawfullmap

modifiers:
	fix "x days remaining" in tooltip. always add +1
	show modifiers in cabinet
	show modifiers on flyingobjectsprite

destruction effect outcome
	add logic
	add to harvest animation


object that applies enriched
	treat for animals

harvest animation:
	first phase:
		add logic for negative accumulative resources
			they go from resource screen to object
	phase 2: 
		existing modifiers tick
		skip if none
		only animate if modifier fizzles out
	thrid phase:
		one by one scattered objects apply modifiers to tiles and objects
	phase 4:
		object destruction

ordered scatter:
	add a little jingle, particles, shake or effect when an effect triggers
		probably needs a new bool object.IsAffectedBy(otherObject)

rename kindle to fuel

new mechanic - mergeable objects:
	some tiles have the tag "mergeable".
	if 3 mergeable objects of the same type are next to each other, they turn into a new bigger version (of 1 increased tier) on the middle tile of the 3
	i.e. 3 carrots turn into "carrot patch" that gives +2 food (i know this technically loses 1 food vs 3 carrots, but the save on space is a big advantage)
	merging happens during scatter, and other objects can occupy the 2 tiles that become free through the merging
	add undraftable behavioural tag
		merged objects are not draftable

affection arrows in production overlays:
	when a production overlay is active, also show moving animated arrows where one object affects the production of another
	the more the affection, the fast/bigger the arrow
	arrow like this: > > > > >
	maybe for ProductionModifiersource, aditionally the coordinate is needed from where the effect originates from
	use ^ ^ ^ on tile if source is from same tile
	a circle at one end of the arrow indicates the source of the effect (can either be the object receiving the effect, or the one it originates from)
	also show indicators of what will merge

new mechanic - stackable modifiers:
	use "enriched" modifier and make it stackable
	stacked modifiers are drawn the same as one modifier visually
	in tooltip stacked modifiers are displayed as "enriched (x2)"
		nested tooltip over (x2) shows when the inidivudal modifiers expire
	implement application logic for stackable ones

new mechanic - object destriction:
	objects can have effects that destroy other objects
	for example: destroy a random adjacent tier 1 plant to gain +1 food production permanently
	affects both effect criteria and outcome:
		in criteria it needs to check if there is an adjacent tier 1 plant
		outcome is the destruction
		outcome also applies modifier to self

new mechanic - crafting:
	object that reduces X of resource A to produce Y of resoure b
	can fail if not enough of resource A is present
	beware race conditions: it has to be calculated in advance which of these can execute and which not
		first come first serve applies

tooltip improvements:
	make modifier description grey in tooltip just like object description, maybe terrain too go check
	add max width attribute
	show type on top right (i.e. "rare object" / "market resource" / "resource production", "synergy tag")
	flip when not enough space on right, so it goes left from cursor and shows the background sprite flipped so the little arrow is correct
	make all textx with resource icons in them size 22

allow going to shop during order selection:
	allow player to go to shop during order selection
	allow shop in evening after harvest animation
	also make sure that player can buy resources for town mandate before the check, after the harvest
		add a big warning to game loop button if mandate can't be payed
	adjust game loop description.txt

rework town mandates to be more dynamic:	
	include list of months they can appear
	change resources to weight table
		so i.e. "winter supplies" requires 0.6 kindle, 0.4 food
		in january that would be 12 kindle, 8 food = 20 total
		in march 36 kindle, 24 food, = 60 total etc
		total is always month * 20

acquire tiles change:
	make it to be only possible to buy tiles 8-adjacent to existing tiles
	hide gold overlay for not buyable ones

sector acquiring:
	sector are preplaced on the map
	each sector except starting one has a preplaced abandonded/ruined shed
	ruined sheds can be purchased with increasingly more gold

sector selection:
	which sector do objects go that are bought in shop?
	which sector do drafted objects go?
	is it free to move objects?
		yes, add a drop down to those two, or another ui control element
	which sector does a bought tile go to?
		always adjacent, add user selection if multiple options

terraforming:
	more focus on terraforming
	more transitions between terrain types
	also multidimenstional transitions
	port fertility to a new TerrainStatDef system
	maybe change system so the stats don't reset on terrain changes
		but make it the other way around: the stats make up the terrain
		for example:
			40 humidity, 20 fertility => shallow water
			10 humidty, 30 fertility => fertile soil
	make transitions more modular
	add an auto-generated terraform graph chart where all terrain types and transformations can be seen
	add stat humidity

art:
	render open shed tile in front of all other objects, so all other objects appear behind doors
	fix side fence perspective of querbalken
	move terrain overlays to new art style
	move modifier art to new art style

tutorial:
	add a tooltip to each element in date panel
		month
		week
		day
		time of day
	add a tutorial (1 month) explaining game play loop

QOL:
	add mote text (small, upwards moving text) when clicking disabled end day button when shed window is open
		or just hide button when shed window is open
	allow looking at shed inventories during object draft
		add a "hide window" button to object draft window
		the button then hides and small symbols at the top show the current selection of objects
		next to the symbols, a "show draft window" button appears
			this button is disabled if any shed window is open
		while hidden, sheds can be openened normally
	show hovered tile object + modifiers in front
	for example relevant for object behind shed roof
	add a "center camera" button to shed window, panning camera to the shed

resource progression:
	not all resources are active from the start
	only get added once first time produced or ordered
	only active get shown in resource panel and remaining res
	some resources are clearly for later stages in the game
	maybe add new category of "complex market resources" for that
		complex resources must either be crafted with objects from basic market resources
		or they are just very hard to acquire (like an object that produces it but ONLY if on water)

order level increases:
	at the end of week, x customers increase their order level, where x equals current month

new customer draft:
	one new customer is drafted at the end of each month
	additionally, a random customer is added at the end of week 1
	else customer levels are just upgraded

fiber:
	make a customer buying fiber

items:
	item that can be used after scatter and before harvest to change the scatter

wiki / codex:
	add ingame way to view def info in a neat UI
	right or middle clicking anything opens codex for that def

tooltip improvement:
	add a new "info text" element to tooltip in top right corner
	use it to display the type of thing that is displayed in the tooltip, i.e:
		"rare object" for objects
		"market resource" for resources
		"terrain" for terrian

obstacles:
	some tiles may have obstacles on them
	to start, just take a rock
	objects will not be scattered on tiles with obstacles on them, until they are removed
	obstacles have HP
	objects can reduce obstacle hp
	i.e. object "Pickaxe" removes 1 hp from all adjacent rocks
	when reaching 0 hp, obstacle is removed
	technically, obstacles are also just objects, but with the "permanent" tag and no effect
		objects with the "permanent" tag do not get removed at the end of the day

conceptDefs:
	concept defs that can be referenced in tooltips to explain mechanics
	- native production
	- market resources
	- abstract resources

modifier apply feedback:
	sound or animation when a modifier is applied
	also when a modifier is lost, like a fizzle away

new content:
	add several customers for variety
	add several new objects

game over:
	real game over screen with stats

[maybe] prestige orders:
	additional optional prestige orders may appear
	these do not lose the game if not completed
	but they give an extra reward if completed (draft of rare or epic object, research points, free expansion)

ui improvements:
	make resource collection toSingleString always have same order of resources (like in defdatabase)
	add sprite to tooltip (for example for resources to easily see what the tooltip is for)
	use more bullet points like in object tooltip
		centralize color and ascii thing for easy use
		use in terrain for "turns into x at y fertility"
		use in object draft effect section, left attached
	in tag tooltip, show owned objects of that tag (grouped by sector)
	show object tier in tooltip
	show resource type in resource tooltip
	when selecting object, show amound of currently owned
	in object draft, make more space for effects
	in shop, objects should be bigger
	in shop, discount indicator should be clearer
	in shop, make object price red if not affordable
	in detailed resource propduction tooltip of object, make resource type a tooltip target, but as text (like >FERTILITY< production that shows fertility desc)

sectors (maybe 'plots'):
	instead of having one centralized inventory, where the objects get scattered randomly across the whole garden, the garden can be split in sectors
	sectors are a defined area within your garden
	the inventory is grouped by sector, meaning each object is assigned to one specific sector
	the objects will only be spread within their particular sector
	at the start of the game there will only be one sector with your whole garden
	i feel like this is a necessary and interesting concept to make strategic depth possible in the later stages of the game, so you can focus different sectors for different combos in parallel
	acquring new sectors is a natural reward in very long intervals, but can also be a reward from prestige orders
	when acquiring a new sector, an existing one can be split along the vertical or horizontal axis, all objects of the split sector can be assigned freely to the two new resulting sectors
	this means that sectors will always be rectangular, making it visually clear
	after that, moving objects between sectors isn't free (still need to decide how to do it, maybe with a new general or specialized currency)
	when drafting objects, you draft for a specific sector (sectors get iterated through each day)
	each sector has a 'shed', a permanent object with no effects, but that is used to check that sectors inventory.
		Starting sector would have one shed in the middle. Would be elegant way to display inventory without it being just a ui menu you open.
		sectors have a name, represented by a sign on the sector shed
	borders between sectors are visualized with some kind fences
	make it possible to name and paint sheds
		shed window background should adapt
	make it possible to open 2 shed windows at once, left and right
		then add drag and drop of objects between sheds
	add option to rename sectors
		small edit buttn in shed window next to title sign
		clicking it opens a dialogue with text input field and confirm/cancel

[maybe] research:
	a research tree is added, with modular dependencies between the research projects (like rimworld for example)
	whenever a research project is finished, you can choose a new one from X (starts at 2) random available options
	objects can now additionally give research points, an abstract resource that is needed to complete research projects
	ObjectDef get a new optional research requirement field with a research def
	some ideas of what techs could do
		unlock a new object or set of objects, that can then be drafted
		general bonus to a particular tag, or resource production (inlcuding abstract)
		allowing to see upcoming orders further in advance
		new mechanics (probably also just a set of objects), like i.e. shovels that can dig out treasures / loot boxes
	still todo: overthing terminology. maybe "research" and "techs" doesn't rly fit the theme
	important design considerations:
		techs should mostly not give "general" or plain stat bonuses, but rather amplify specific strategies or help in specific situations
	ideas for specific researches
		- additional cabinet in each shed ("bigger shed") (1 -> 2 -> 3)
	    - additional shelf in each shed cabinet ("taller shed cabinets") (3 -> 4 -> 5 -> 6)
		- additional object per shelf in each shelf in each cabinet in each shed ("wider shed cabinets") (3 -> 4 -> 5)
		- storage objects (for more objects in a sector)
		- unlock shop (buying res only)
		- unlock selling resources in shop
		- unlock buy objects in shop
		- more and better shop discounts (+1 obj, +1 res, higher discount)
		- you get an additional option when drafting an object (3 -> 4)
		- you get an additional option when drafting a customer (2 -> 3)
		- you get an additional option when drafting a customer (3 -> 4)
		- you get an additional option when drafting a tech to research (2 -> 3)
		- you get an additional option when drafting a tech to research (3 -> 4)
		- Unlock plots and lets you split your garden into 2 plots
		- Unlock a 3rd plot
		- Unlock a 4th plot
		- Unlock a 5th plot
		- fertilization objects
		- food specialization objects
		- herbs specialization objects
		- ornaments specialization objects
		- kindle specialization objects
		- fiber specialization objects
		- obstacle removal objects
		- relations: still get some amount for failed orders
		- relations: get additional money if haven't failed order 3 times in a row for customer
		- mechanic and resource to remove specific objects from inventory
		- mechanic to merge objects
		- mechanic and resource to "expand" option - doesn't replace original options like in a replace, but rather adds 3 additional options
		- general +10% produced for specific resource (applied at end)
		- mechanic to make objects permanent
		- mechanic to get higher tier items in draft than usual (like +5% chance of rare items in end of day draft)
		- mechanic to pay currency for failed delivered order to make it count not as missed
		- see "bossfight" orders an additional month in advance (1->2)
		- new resource trading mechanic where you can trade one resource for another at reduced efficiency
			- then additional research to improve trading
		- complex resources that are "crafted" from basic resources (i.e. object with -1 food, -1 herbs, +1 premium food)
		- mechanic and resource to change town mandate. When used, you get a new option and can choose to stick to the old mandate or take the new one

sound:
	add sound to the game

main menu:
	just a small main menu instead of starting game directly

load/save game:
	logic to save and load games

campaign:
	different levels
	each level is the garden of a different town
	garden map generation is unique per town
	town mandates are unique per town